<?xml version="1.0" encoding="UTF-8" ?>
<entity-mappings xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm
        http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd"
	version="2.1">
	<entity class="com.justdavis.karl.rpstourney.webservice.auth.Account">
		<table name="Accounts" />
		<attributes>
			<id name="id">
				<column name="id" unique="true" nullable="false" updatable="false" />
				<generated-value strategy="AUTO" />
			</id>
			<one-to-many name="authTokens" fetch="EAGER">
				<join-column name="accountId" />
				<cascade>
					<cascade-all />
				</cascade>
			</one-to-many>
			<element-collection name="roles" fetch="EAGER">
				<collection-table name="AccountRoles" />
			</element-collection>
		</attributes>
	</entity>
	<entity class="com.justdavis.karl.rpstourney.webservice.auth.AuthToken">
		<table name="AuthTokens" />
		<attributes>
			<id name="token">
				<column name="token" unique="true" nullable="false"
					updatable="false" />
			</id>
			<basic name="creationTimestamp">
				<column name="creationTimestamp" nullable="false" updatable="false" />
			</basic>
			<many-to-one name="account">
				<!-- The column name is set on the other side of the relationship. -->
				<cascade>
					<cascade-persist />
					<cascade-merge />
					<cascade-refresh />
					<cascade-detach />
				</cascade>
			</many-to-one>
		</attributes>
	</entity>
	<entity
		class="com.justdavis.karl.rpstourney.webservice.auth.guest.GuestLoginIdentity">
		<table name="GuestLoginIdentities" />
		<attributes>
			<id name="id">
				<column name="id" unique="true" nullable="false" updatable="false" />
				<generated-value strategy="AUTO" />
			</id>
			<one-to-one name="account">
				<join-column name="accountId" />
				<cascade>
					<cascade-persist />
					<cascade-merge />
					<cascade-refresh />
					<cascade-detach />
				</cascade>
			</one-to-one>
		</attributes>
	</entity>
	<entity
		class="com.justdavis.karl.rpstourney.webservice.auth.game.GameLoginIdentity">
		<table name="GameLoginIdentities" />
		<attributes>
			<id name="id">
				<column name="id" unique="true" nullable="false" updatable="false" />
				<generated-value strategy="AUTO" />
			</id>
			<basic name="emailAddress">
				<column name="emailAddress" unique="true" nullable="false" />
			</basic>
			<basic name="passwordHash">
				<column name="passwordHash" nullable="false" />
			</basic>
			<one-to-one name="account">
				<join-column name="accountId" />
				<cascade>
					<cascade-persist />
					<cascade-merge />
					<cascade-refresh />
					<cascade-detach />
				</cascade>
			</one-to-one>
		</attributes>
	</entity>
</entity-mappings>